{% extends 'shop/base.html' %}

{% block title %}Shopping Cart - ShopSmart{% endblock %}

{% block content %}
<h2 class="section-title">Your Shopping Cart</h2>
<p class="section-subtitle" style="margin-bottom: 1.5rem;">Review your items before checkout</p>

{% if cart_items %}
<div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04); border: 1px solid #e2e8f0;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 1px solid #e2e8f0;">
                <th style="text-align: left; padding: 0.875rem; color: #0f172a; font-weight: 700; font-size: 0.9rem;">Product</th>
                <th style="text-align: center; padding: 0.875rem; color: #0f172a; font-weight: 700; font-size: 0.9rem;">Price</th>
                <th style="text-align: center; padding: 0.875rem; color: #0f172a; font-weight: 700; font-size: 0.9rem;">Quantity</th>
                <th style="text-align: center; padding: 0.875rem; color: #0f172a; font-weight: 700; font-size: 0.9rem;">Subtotal</th>
                <th style="text-align: center; padding: 0.875rem; color: #0f172a; font-weight: 700; font-size: 0.9rem;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr style="border-bottom: 1px solid #f1f5f9;">
                <td style="padding: 1.125rem 0.875rem;">
                    <strong style="color: #0f172a; font-size: 0.95rem;">{{ item.product.name }}</strong><br>
                    <small style="color: #64748b; font-size: 0.85rem;">{{ item.product.category.name }}</small>
                </td>
                <td style="text-align: center; padding: 1.125rem 0.875rem; color: #0f172a; font-size: 0.9rem;">₹{{ item.product.price }}</td>
                <td style="text-align: center; padding: 1.125rem 0.875rem; color: #0f172a; font-weight: 600; font-size: 0.95rem;">{{ item.quantity }}</td>
                <td style="text-align: center; padding: 1.125rem 0.875rem; font-weight: 700; color: #3b82f6; font-size: 1rem;">₹{{ item.get_subtotal }}</td>
                <td style="text-align: center; padding: 1.5rem 1rem;">
                    <form method="post" action="{% url 'update_cart_item' item.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" name="action" value="increase" class="btn" style="padding: 0.5rem 0.75rem; font-size: 0.9rem;">+</button>
                        <button type="submit" name="action" value="decrease" class="btn btn-secondary" style="padding: 0.5rem 0.75rem; font-size: 0.9rem;">-</button>
                        <button type="submit" name="action" value="remove" class="btn btn-danger" style="padding: 0.5rem 0.75rem; font-size: 0.9rem;">Remove</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" style="text-align: right; padding: 1.5rem 0.875rem; font-size: 1.25rem; color: #0f172a; font-weight: 700;">Total:</td>
                <td style="text-align: center; padding: 1.5rem 0.875rem; font-size: 1.625rem; color: #3b82f6; font-weight: 700;">₹{{ cart.get_total }}</td>
                <td></td>
            </tr>
        </tfoot>
    </table>
    
    <div style="margin-top: 2rem; text-align: right;">
        <a href="{% url 'product_list' %}" class="btn btn-secondary" style="padding: 0.75rem 1.5rem;">Continue Shopping</a>
        <a href="{% url 'checkout' %}" class="btn btn-success" style="margin-left: 0.75rem; padding: 0.75rem 1.5rem;">Proceed to Checkout</a>
    </div>
</div>
{% else %}
<div class="empty-state">
    <h3>Your cart is empty</h3>
    <p>Start shopping to add items to your cart</p>
    <a href="{% url 'product_list' %}" class="btn" style="margin-top: 1rem;">Browse Products</a>
</div>
{% endif %}
{% endblock %}
